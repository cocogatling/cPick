/* ========================================================================== */
/*                                  ROOT                                      */
/* ========================================================================== */
:root{
	--bg:#0b0d12;
	--panel:#101424;
	--ink:#e8ecff;
	--muted:#9aa3c7;
	--line:#20263e;
	--accent:#8f7fff;
	--ok:#45f39a;
	--warn:#ffb86b;
}

/* ========================================================================== */
/*  PART 1: BASE / LAYOUT / TOP BAR (responsive)                              */
/* ========================================================================== */

/* Base */
*{ box-sizing:border-box }
html,body{ height:100% }
body{
	margin:0;
	background:radial-gradient(
		clamp(600px, 80vw, 1200px) clamp(300px, 40vh, 600px) at 15% -10%,
		#1b1f31 0%, #0b0d12 40%
	);
	color:var(--ink);
	font:500 clamp(13px, 1.5vw, 14px)/1.45 ui-sans-serif,system-ui,Inter,Arial;
}
h1,h2{ font-weight:800; letter-spacing:.2px }
h1{ font-size:clamp(16px, 2vw, 18px); margin:0 }

/* Layout */
.wrap{
	width:100%;
	max-width:clamp(320px, 95vw, 1400px);
	margin:0 auto;
	padding:clamp(12px, 2vw, 16px);
}
/* Grid layout: left (controls) + right (roll log) */
.grid{
	display:grid;
	grid-template-columns:
		clamp(260px, 24vw, 340px)   /* left panel */
		1fr;                        /* right expands fully */
	gap:0;                          /* no space between left/right */
}

@media (max-width:960px){
	.grid{ grid-template-columns:1fr }
}

/* Top bar */
.topbar{
	position:sticky; top:0; z-index:50;
	border-bottom:1px solid var(--line);
	background:linear-gradient(#0b0d12cc,#0b0d12cc);
	backdrop-filter:saturate(1.2) blur(6px);
}
.topbar .wrap{ display:flex; align-items:center; justify-content:space-between }
.title{ display:flex; align-items:center; gap:clamp(8px, 1.5vw, 12px) }
.logo{
	width:clamp(28px, 4vw, 36px);
	height:clamp(28px, 4vw, 36px);
	background:linear-gradient(135deg,#8f7fff,#2de2e6);
	border-radius:clamp(8px, 1.2vw, 10px);
	box-shadow:0 clamp(4px, 0.6vw, 6px) clamp(16px, 2vw, 20px) #8f7fff22;
}
.stats{ display:flex; align-items:center; gap:clamp(8px, 1.5vw, 10px); flex-wrap:wrap }

/* ========================================================================== */
/*  PART 2: CARDS / REVEAL / BUTTONS / RESULTS / FOOTER (responsive)          */
/* ========================================================================== */

/* ---- Cards / panels ---- */
.card1,
.card{
	background:var(--panel);
	border:1px solid var(--line);
	border-radius:clamp(10px, 1.2vw, 14px);
	padding:clamp(12px, 1.6vw, 16px);
	box-shadow:0 6px 30px #00000040 inset, 0 2px 0 #0b0f1a;
}
.card1{ max-width:min(100%, 300px) }
.card{ width:100%; max-width:min(100%, 1100px) }
.card1-title,.card-title{ margin:0; font-size:clamp(15px, 1.6vw, 16px) }
/* Right/log panel */
.card2{
	background:var(--panel);
	border:1px solid var(--line);
	border-radius:clamp(10px, 1.2vw, 14px);
	padding:clamp(12px, 1.6vw, 16px);
	box-shadow:0 6px 30px #00000040 inset, 0 2px 0 #0b0f1a;

	width:100%;        /* take all available right space */
	min-height:60vh;

	display:flex;
	flex-direction:column;
}

/* Make cards inside roll log use grid that auto-fills 3–4 across */
.card2 .scroll{
	flex:1; min-height:0; overflow:auto;

	display:grid;
	grid-template-columns:repeat(auto-fill, minmax(160px, 1fr));
	gap:clamp(12px, 1.6vw, 16px);
}

/* mobile: full width when stacked */
@media (max-width:960px){
	.card2{
		max-width:100%;
		min-height:auto;
	}
}

/* ---- Chips / badges ---- */
.chip{
	display:inline-flex; align-items:center; gap:clamp(6px,1.2vw,8px);
	padding:clamp(6px,1.2vw,8px) clamp(8px,1.6vw,10px);
	border:1px solid var(--line);
	background:#0f1320; border-radius:clamp(9px,1.2vw,11px);
}
.mono{ font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace }
.badge{
	display:inline-flex; align-items:center;
	border:1px solid var(--line);
	padding:clamp(4px,.9vw,6px) clamp(8px,1.6vw,10px);
	border-radius:999px; color:var(--muted); font-weight:600;
}

/* ---- Buttons ---- */
.btn{
	padding:clamp(8px,1.4vw,10px) clamp(10px,1.8vw,12px);
	border-radius:clamp(8px,1.2vw,10px);
	border:1px solid #2a2f45;
	background:#151b2f; color:var(--ink); font-weight:700; cursor:pointer;
	transition:transform .02s ease, box-shadow .2s ease, border-color .2s ease;
	box-shadow:0 clamp(4px,.9vw,6px) clamp(14px,1.8vw,18px) #0006;
	font-size:clamp(12px,1.4vw,14px);
}
.btn:hover{ border-color:#3a4266 }
.btn:active{ transform:translateY(1px) }
.btn[disabled]{ opacity:.55; cursor:not-allowed; filter:saturate(.3) }
.btn.ghost{ background:transparent; border-color:var(--line) }
.btn.secondary{ background:#0f1320; border-color:#2a2f45 }
.btn.sm{ padding:clamp(4px,1.1vw,6px) clamp(8px,1.6vw,10px); font-weight:600 }

/* ---- Select ---- */
.select-label{ display:block; font-weight:700; margin-top:clamp(6px,1.2vw,8px) }
.select-wrap{ position:relative }
.select{
	width:100%; background:#0f1320; color:var(--ink);
	border:1px solid var(--line);
	border-radius:clamp(8px,1.2vw,10px);
	padding:clamp(8px,1.4vw,10px) clamp(36px,4.2vw,40px) clamp(8px,1.4vw,10px) clamp(10px,1.6vw,12px);
	font-weight:600; appearance:none;
}
.select:focus{ outline:none; border-color:#3a4266 }
.select-wrap::after{
	content:"▾"; position:absolute; right:clamp(10px,1.4vw,12px); top:50%; transform:translateY(-50%);
	pointer-events:none; color:var(--muted); font-weight:800;
}

/* ---- Results grid ---- */
:root{ --card-w: clamp(90px, 22vw, 139.5px) } /* safe fallback if not already defined */

.roll-grid{
	display:grid;
	grid-template-columns:repeat(auto-fill, minmax(var(--card-w), 1fr));
	gap:clamp(8px, 1.8vw, 14px);
	align-content:start;
}

.card-tile{ width:var(--card-w) }

.card-frame{
	width:var(--card-w);
	aspect-ratio: 139.5 / 228;
	border-radius:clamp(8px,1.2vw,10px);
	overflow:hidden;
	background:#0e1322;
	box-shadow:0 0 0 1px #2a2f45 inset;
}
.card-frame img{ width:100%; height:100%; object-fit:contain; display:block }

/* ---- Footer ---- */
.footer{ display:flex; justify-content:center; padding:clamp(14px, 2vw, 20px) 0 }
#openBinder{
	font-size:clamp(18px, 2.6vw, 25px);
	padding:clamp(10px, 2vw, 14px) clamp(16px, 4vw, 28px);
	border-radius:clamp(10px,1.2vw,14px);
}

/* ---- Overlay (two-card reveal) ---- */
.reveal{
	position:fixed; inset:0; z-index:9999;
	display:grid; place-items:center;
	opacity:0; pointer-events:none; transition:opacity .35s;
}
.reveal.show{ opacity:1; pointer-events:auto }
.backdrop{ position:absolute; inset:0; background:rgba(0,0,0,.55); backdrop-filter:blur(6px) }
.stage{ position:relative; display:flex; gap:clamp(20px,5vw,40px); align-items:center; justify-content:center }
@keyframes popIn{
	0%{ transform:scale(.8) rotate(-6deg); opacity:0 }
	60%{ transform:scale(1.08) rotate(-1deg); opacity:1 }
	100%{ transform:scale(1) rotate(0); opacity:1 }
}
.cardreveal{ border-radius:clamp(12px,1.6vw,14px); box-shadow:0 12px 40px rgba(0,0,0,.5); opacity:0; transform:scale(.8) }
.cardreveal.show{ animation:popIn .9s cubic-bezier(.2,.7,.2,1) forwards }
.artwrap{ width:100%; height:100%; border-radius:inherit; overflow:hidden }
.cardreveal img.main{ width:100%; height:100%; object-fit:cover; display:block }
.cardreveal img.overlay{ position:absolute; z-index:5; inset:-25%; width:150%; height:150%; pointer-events:none; border-radius:0 }
#revealModal, #revealModal .stage, .cardreveal{ overflow:visible }
#revealModal .stage{ position:relative; z-index:2 }

/* ========================================================================== */
/*  PART 3: BINDER / MODAL                                                     */
/* ========================================================================== */

/* Modal wrapper */
.modal.hidden{ display:none }
.modal{
	position:fixed; inset:0; z-index:100;
	display:flex; align-items:flex-start; justify-content:center;
	padding-top:80px; padding-bottom:24px;
}

/* Binder container */
.binder{
	position:relative; display:flex; justify-content:center;
	width:100%; max-width:1200px; max-height:calc(100vh - 48px);
	/* transform: scale(0.8); transform-origin: top center;  // if you still need it */
}
.binder-spread{ display:grid; grid-template-columns:1fr auto 1fr; gap:16px; align-items:stretch }

/* Binder header text color */
.binder-header span,
.binder-header .badge,
.binder-header #collectedCount{
	color:#ffffff; font-weight:800;
}

/* Right-side shortcut buttons */
.binder-side{
	position:absolute; top:10px; right:-160px;
	display:flex; flex-direction:column; gap:8px; align-items:flex-start;
}
.sidebtn{
	display:flex; align-items:center; gap:8px;
	padding:10px 12px; border-radius:12px;
	border:1px solid var(--line); background:#0f1320; color:var(--ink); font-weight:700;
}
.sidebtn .key{
	display:inline-grid; place-items:center; min-width:20px; height:20px; padding:0 6px;
	border:1px solid #2a2f45; border-radius:6px; font-weight:800; color:var(--muted); background:#0b0f1c;
}

/* Binder page */
.binder-page{
	position:relative; display:flex; flex-direction:column; height:100%;
	background:#FC79A9; color:#f3f4f8;
	padding:12px; border-radius:18px;
	box-shadow:inset 0 0 0 2px #e3e6ee, inset 0 0 30px #00000015;
}
.binder-header,.binder-footer{
	display:flex; align-items:center; justify-content:space-between; padding:4px 6px; font-weight:800;
}
.binder-footer{
	display:flex; justify-content:flex-end; align-items:center;
	padding:4px 6px; font-weight:800;
}

/* Page sheet (grid area) */
.sheet{
	flex:1; min-height:0; margin-bottom:0;
	background:#0e1222; border:1px solid var(--line); border-radius:14px;
	padding:12px 10px; box-shadow:inset 0 0 0 1px #1b2138, 0 30px 60px #0006;
}

/* Rows: 4–4–5 with side bars on row4 */
.row{ display:grid; gap:10px; margin-bottom:10px }
.row:last-child{ margin-bottom:0 }
.row4{ grid-template-columns:8px repeat(4,1fr) 8px }
.row5{ grid-template-columns:repeat(5,1fr) }
.row .gap{
	background:linear-gradient(180deg,transparent 0,#1a1f33 20%,#1a1f33 80%,transparent 100%);
	border-radius:6px;
}

/* Centered rows 1–3 */
.sheet .row:nth-of-type(1),
.sheet .row:nth-of-type(2),
.sheet .row:nth-of-type(3){
	display:flex; justify-content:center; gap:0; margin-bottom:6px;
}
.sheet .row:nth-of-type(1) .slot,
.sheet .row:nth-of-type(2) .slot,
.sheet .row:nth-of-type(3) .slot{ margin:0 1px }

/* Slots & pockets */
.slot{ display:flex; justify-content:center; align-items:center }
.pocket{
	position:relative;
	width:139.5px; height:228px;
	background:#0f1320; border:1px solid #34406e; border-radius:8px; overflow:hidden;
}
.pocket.owned{ cursor:pointer; position:relative }
.pocket.owned > *{ pointer-events:none }
.pocket.owned:focus-visible{ outline:2px solid var(--accent); outline-offset:2px }

/* Card images */
.card-img{
	position:absolute; inset:0; width:100%; height:100%;
	object-fit:cover; transition: opacity .15s ease-in-out;
}
.card-img.owned{ opacity:1 }
.peek-img{ opacity:0 }
.pocket.reveal-on-hover:hover .peek-img{ opacity:1 }

/* Chips */
.qty-chip, .price-chip, .foil-chip{ position:absolute; z-index:2 }
.price-chip{
	top:-4px; left:-4px; padding:2px 6px; font-size:12px; font-weight:700;
	border-radius:999px; font-family:monospace;
	background:#2b2f48; color:#e8ecff; border:1px solid #3a4266; overflow:hidden;
}
.qty-chip{
	top:-4px; right:-4px; padding:2px 5px; font-size:12px; font-weight:700; /* fixed 12qpx */
	border-radius:999px; background:#2b2f48; color:#e8ecff; border:1px solid #3a4266;
}
.slot .sell{ padding:4px 8px; font-size:11px }

/* Spine & rings */
.binder-spine{
	width:40px; position:relative;
	display:flex; flex-direction:column; align-items:center; justify-content:center; gap:30px;
}
.binder-spine::before{
	content:""; position:absolute; top:0; bottom:0; left:50%;
	width:6px; transform:translateX(-50%);
	background:linear-gradient(#c7ccd8,#9aa3c7); border-radius:6px;
	box-shadow:inset 0 0 0 1px #b3b9c7, 0 0 20px #0003;
}
.ring{
	width:50px; height:25px; border:4px solid #cfd6ea; border-bottom:none;
	border-radius:50px 50px 0 0; background:transparent; box-shadow:0 4px 10px #0006 inset;
}

/* Labels */
.binder-spread{ position:relative }
.volume-label{
	position:absolute; bottom:-40px; left:50%; transform:translateX(-50%);
	font-size:24px; font-weight:700; color:#fff; pointer-events:none; user-select:none;
}

/* Sell modal */
.sellModal{
	z-index:9999;
	transform:scale(0.5);
	transform-origin:center;
}
/* Overlay centered like the reveal */
.sellOverlay{
	position:fixed; inset:0; z-index:1000;
	display:grid; place-items:center;
	background:rgba(8,10,18,.55); backdrop-filter:blur(4px) saturate(120%);
}
.sellPanel{
	background:var(--panel); color:var(--ink);
	border:1px solid var(--line); border-radius:18px; box-shadow:0 28px 90px rgba(0,0,0,.6);
	width:clamp(280px,92vw,720px); max-height:min(88vh,880px); overflow:auto;
	padding:22px; font-size:20px; line-height:1.55;
}
/* two-col → one-col on small screens */
.sellBody{display:grid; grid-template-columns:180px 1fr; gap:18px; align-items:center}
.sellImg{width:180px; border-radius:14px; box-shadow:0 12px 40px rgba(0,0,0,.45)}
@media (max-width:720px){
	.sellBody{grid-template-columns:1fr}
	.sellImg{width:min(55vw,220px); margin-inline:auto}
}